{% extends "layouts/base.html" %}

{% block title %}Home - {{ site.name }}{% endblock %}

{% block extra_styles %}
<style>
    .hero {
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        color: white;
        padding: 4rem 2rem;
        text-align: center;
        border-radius: 8px;
        margin-bottom: 2rem;
    }
    
    .hero h1 {
        font-size: 2.5rem;
        margin-bottom: 1rem;
    }
    
    .hero p {
        font-size: 1.2rem;
        opacity: 0.9;
    }
    
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1.5rem;
        margin-top: 2rem;
    }
    
    .stat-card {
        background: white;
        padding: 1.5rem;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        text-align: center;
    }
    
    .stat-value {
        font-size: 2rem;
        font-weight: bold;
        color: var(--primary-color);
    }
    
    .stat-label {
        color: #666;
        margin-top: 0.5rem;
    }
    
    .features {
        margin-top: 3rem;
    }
    
    .features h2 {
        text-align: center;
        margin-bottom: 2rem;
    }
    
    .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
    }
    
    .feature-card {
        background: white;
        padding: 2rem;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .feature-card h3 {
        color: var(--primary-color);
        margin-bottom: 1rem;
    }
</style>
{% endblock %}

{% block content %}
<section class="hero">
    <h1>Welcome to {{ site.name }}</h1>
    <p>{{ site.description }}</p>
    
    {% if user.is_authenticated %}
    <p class="mt-2">Hello, {{ user.name }}! Welcome back.</p>
    {% else %}
    <p class="mt-2">Sign up today to get started!</p>
    {% endif %}
</section>

{# Statistics Section #}
{% if stats %}
<section class="stats">
    <h2 class="text-center">Our Numbers</h2>
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-value">{{ stats.total_users|default(0) }}</div>
            <div class="stat-label">Happy Users</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ stats.total_products|default(0) }}</div>
            <div class="stat-label">Products</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ stats.total_orders|default(0) }}</div>
            <div class="stat-label">Orders Completed</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ settings.currency_symbol }}{{ "%.0f"|format(stats.revenue|default(0)) }}</div>
            <div class="stat-label">Revenue</div>
        </div>
    </div>
</section>
{% endif %}

{# Features Section #}
<section class="features">
    <h2>Why Choose Us</h2>
    <div class="features-grid">
        {% set features = [
            {"title": "Fast Delivery", "description": "Get your products delivered within 24 hours in most locations."},
            {"title": "Quality Products", "description": "All our products go through rigorous quality checks."},
            {"title": "24/7 Support", "description": "Our support team is always here to help you."}
        ] %}
        
        {% for feature in features %}
        <div class="feature-card">
            <h3>{{ feature.title }}</h3>
            <p>{{ feature.description }}</p>
        </div>
        {% endfor %}
    </div>
</section>

{# Categories Section #}
{% if categories %}
<section class="categories mt-3">
    <h2 class="text-center mb-2">Browse Categories</h2>
    <div class="stats-grid">
        {% for category in categories %}
        <div class="stat-card">
            <h3>{{ category }}</h3>
            <p>{{ products|selectattr("category")|list|length }} products</p>
        </div>
        {% endfor %}
    </div>
</section>
{% endif %}

{# Debug info - only shown when debug is true #}
{% if debug %}
<section class="debug mt-3" style="background: #ffe0e0; padding: 1rem; border-radius: 4px;">
    <h3>Debug Information</h3>
    <pre>{{ user|tojson }}</pre>
</section>
{% endif %}
{% endblock %}

{% block scripts %}
<script>
    console.log('Home page loaded');
    console.log('Site version: {{ site.version }}');
</script>
{% endblock %}
